(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ac239"],{"17eb":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-title",[a("span",{domProps:{textContent:t._s(t.$t(t.create?"templates.New":"templates.Edit"))}}),a("div",{staticClass:"flex-grow-1"}),a("v-btn-toggle",{attrs:{borderless:"",dense:"",mandatory:""},model:{value:t.currentMode,callback:function(e){t.currentMode=e},expression:"currentMode"}},[a("v-btn",{attrs:{value:"editor"},domProps:{textContent:t._s(t.$t("templates.Editor"))},on:{click:function(e){return t.updateEditor()}}}),a("v-btn",{attrs:{value:"json"},domProps:{textContent:t._s(t.$t("templates.Json"))},on:{click:function(e){return t.updateJson()}}})],1)],1),a("v-card-text",[a("v-row",[a("v-col",[a("v-text-field",{attrs:{label:t.$t("common.Name"),disabled:!t.create,outlined:"","hide-details":""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),"editor"===t.currentMode?a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-text-field",{attrs:{label:t.$t("templates.Display"),outlined:"","hide-details":""},model:{value:t.templateObj.display,callback:function(e){t.$set(t.templateObj,"display",e)},expression:"templateObj.display"}})],1),a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-text-field",{attrs:{label:t.$t("templates.Type"),outlined:"","hide-details":""},model:{value:t.templateObj.type,callback:function(e){t.$set(t.templateObj,"type",e)},expression:"templateObj.type"}})],1)],1):t._e(),t.loading?a("v-row",[a("v-col",{attrs:{cols:"5"}}),a("v-col",{attrs:{cols:"2"}},[a("v-progress-circular",{staticClass:"mr-2",attrs:{indeterminate:""}}),a("strong",{domProps:{textContent:t._s(t.$t("common.Loading"))}})],1)],1):t._e()],1)],1)],1),"json"!==t.currentMode||t.loading?t._e():a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-text",[a("v-row",[a("v-col",[a("ace",{ref:"editor",attrs:{"editor-id":t.name+"json",theme:t.isDark()?"monokai":"github",height:"50vh",lang:"json"},on:{editorready:function(e){return t.$refs.editor.setValue(t.template)}},model:{value:t.template,callback:function(e){t.template=e},expression:"template"}})],1)],1)],1)],1)],1),"editor"!==t.currentMode||t.loading?t._e():a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-title",{domProps:{textContent:t._s(t.$t("templates.Variables"))}}),a("v-card-text",{staticClass:"pb-1"},[a("template-variables",{model:{value:t.templateObj.data,callback:function(e){t.$set(t.templateObj,"data",e)},expression:"templateObj.data"}})],1)],1)],1),"editor"!==t.currentMode||t.loading?t._e():a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-title",{domProps:{textContent:t._s(t.$t("templates.Install"))}}),a("v-card-text",{staticClass:"pb-1"},[a("template-processors",{attrs:{name:"install"},model:{value:t.templateObj.install,callback:function(e){t.$set(t.templateObj,"install",e)},expression:"templateObj.install"}})],1)],1)],1),"editor"!==t.currentMode||t.loading?t._e():a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-title",{domProps:{textContent:t._s(t.$t("templates.RunConfig"))}}),a("v-card-text",{staticClass:"pb-1"},[a("template-run",{model:{value:t.templateObj.run,callback:function(e){t.$set(t.templateObj,"run",e)},expression:"templateObj.run"}})],1)],1)],1),"editor"!==t.currentMode||t.loading?t._e():a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-title",{domProps:{textContent:t._s(t.$t("templates.Shutdown"))}}),a("v-card-text",{staticClass:"pb-1"},[a("template-shutdown",{model:{value:t.templateObj.run,callback:function(e){t.$set(t.templateObj,"run",e)},expression:"templateObj.run"}})],1)],1)],1),"editor"!==t.currentMode||t.loading?t._e():a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-title",{domProps:{textContent:t._s(t.$t("templates.PreHook"))}}),a("v-card-text",{staticClass:"pb-1"},[a("template-processors",{attrs:{name:"pre"},model:{value:t.templateObj.run.pre,callback:function(e){t.$set(t.templateObj.run,"pre",e)},expression:"templateObj.run.pre"}})],1)],1)],1),"editor"!==t.currentMode||t.loading?t._e():a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-title",{domProps:{textContent:t._s(t.$t("templates.PostHook"))}}),a("v-card-text",{staticClass:"pb-1"},[a("template-processors",{attrs:{name:"post"},model:{value:t.templateObj.run.post,callback:function(e){t.$set(t.templateObj.run,"post",e)},expression:"templateObj.run.post"}})],1)],1)],1),"editor"!==t.currentMode||t.loading?t._e():a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-title",{domProps:{textContent:t._s(t.$t("templates.EnvVars"))}}),a("v-card-text",{staticClass:"pb-1"},[a("template-envvars",{model:{value:t.templateObj.run.environmentVars,callback:function(e){t.$set(t.templateObj.run,"environmentVars",e)},expression:"templateObj.run.environmentVars"}})],1)],1)],1),"editor"!==t.currentMode||t.loading?t._e():a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-title",{domProps:{textContent:t._s(t.$t("templates.SupportedEnvironments"))}}),a("v-card-text",{staticClass:"pb-1"},[a("template-environments",{model:{value:t.templateObj.supportedEnvironments,callback:function(e){t.$set(t.templateObj,"supportedEnvironments",e)},expression:"templateObj.supportedEnvironments"}})],1)],1)],1),a("v-col",{attrs:{cols:"12"}},[a("v-btn",{attrs:{color:"success",large:"",block:""},domProps:{textContent:t._s(t.$t("common.Save"))},on:{click:t.save}})],1)],1)},o=[],r=(a("4160"),a("d81d"),a("b0c0"),a("b64b"),a("159b"),a("96ea")),n=a("7c15"),l={data:function(){return{currentMode:"editor",loading:!1,create:void 0===this.$route.params.id,name:void 0===this.$route.params.id?"":this.$route.params.id,template:"",templateObj:{data:{},run:{command:"",environmentVars:{}},display:"",type:"",install:[],supportedEnvironments:[]}}},mounted:function(){this.create||this.loadData()},methods:{loadData:function(){var t=this;this.loading=!0;var e=this;e.$http.get("/api/templates/".concat(e.$route.params.id)).then((function(a){var s=a.data;s.readme=void 0,e.template=JSON.stringify(s,void 0,4),e.templateObj=s,s.run&&s.run.stop&&(e.stopType="command"),s.run&&s.run.stopCode&&(e.stopType="signal"),t.templateObj.data||(t.templateObj.data={}),Object.keys(t.templateObj.data).forEach((function(e){t.templateObj.data[e].type||(t.templateObj.data[e].type="string")})),t.templateObj.run||(t.templateObj.run={}),t.templateObj.run.environmentVars||(t.templateObj.run.environmentVars={}),t.templateObj.run.pre||(t.templateObj.run.pre=[]),t.templateObj.run.post||(t.templateObj.run.post=[]),t.templateObj.supportedEnvironments||(t.templateObj.supportedEnvironments=[]),t.templateObj.install||(t.templateObj.install=[]);var o=function(t){return"download"===t.type&&"string"===typeof t.files&&(t.files=[t.files]),"command"===t.type&&"string"===typeof t.commands&&(t.commands=[t.commands]),t};t.templateObj.install.map(o),t.templateObj.run.pre.map(o),t.templateObj.run.post.map(o),e.$refs.editor&&e.$refs.editor.ready&&e.$refs.editor.setValue(e.template),e.loading=!1})).catch(Object(n["a"])(e))},save:function(){"editor"===this.currentMode&&this.updateJson();var t=this;t.$http.put("/api/templates/".concat(t.name),t.template).then((function(e){t.$toast.success(t.$t("templates.SaveSuccess")),t.create&&t.$router.push({name:"Template",params:{id:t.name}})})).catch(Object(n["a"])(t,{400:"errors.ErrInvalidJson"}))},updateEditor:function(){var t=JSON.parse(this.template);t.run&&t.run.stop&&(this.stopType="command"),t.run&&t.run.stopCode&&(this.stopType="signal"),this.templateObj=JSON.parse(this.template)},updateJson:function(){this.templateObj.name=this.name,this.templateObj.run.stopCode=1*this.templateObj.run.stopCode,this.templateObj.run["command"===this.stopType?"stopCode":"stop"]=void 0,this.template=JSON.stringify(this.templateObj,void 0,4),this.$refs.editor&&this.$refs.editor.ready&&this.$refs.editor.setValue(this.template)},isDark:r["a"]}},p=l,i=a("2877"),d=a("6544"),c=a.n(d),m=a("8336"),u=a("a609"),v=a("b0af"),b=a("99d9"),j=a("62ad"),O=a("490a"),f=a("0fd9"),h=a("8654"),x=Object(i["a"])(p,s,o,!1,null,null,null);e["default"]=x.exports;c()(x,{VBtn:m["a"],VBtnToggle:u["a"],VCard:v["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:j["a"],VProgressCircular:O["a"],VRow:f["a"],VTextField:h["a"]})}}]);
//# sourceMappingURL=chunk-2d0ac239-legacy.97eff4c8.js.map