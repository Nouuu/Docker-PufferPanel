{"version":3,"sources":["webpack:///./src/utils/types.js","webpack:///./src/views/Node.vue?dd09","webpack:///src/views/Node.vue","webpack:///./src/views/Node.vue?a09f","webpack:///./src/views/Node.vue"],"names":["typeNode","node","name","publicHost","publicPort","Number","privateHost","privatePort","sftpPort","render","_vm","this","_h","$createElement","_c","_self","attrs","domProps","_s","$t","staticClass","model","value","callback","$$v","$set","expression","on","updateNode","deleteNode","loadingDeploy","$event","downloadConfig","markdown","staticRenderFns","loading","deployment","clientId","clientSecret","configTemplate","logs","web","token","public","location","protocol","host","panel","enable","daemon","auth","url","data","cache","servers","sftp","loadData","methods","ctx","$http","get","$route","params","id","then","response","put","$toast","success","delete","$router","push","config","download","JSON","stringify","undefined","contentType","a","document","createElement","blob","Blob","content","href","window","URL","createObjectURL","filename","click","component","VBtn","VCard","VCardText","VCardTitle","VCol","VRow","VTextField"],"mappings":"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","file":"js/chunk-6e25d783.29aad4ff.js","sourcesContent":["export function typeNode (node) {\n  return {\n    name: node.name,\n    publicHost: node.publicHost,\n    publicPort: Number(node.publicPort),\n    privateHost: node.privateHost,\n    privatePort: Number(node.privatePort),\n    sftpPort: Number(node.sftpPort)\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\",\"offset-md\":\"3\"}},[_c('v-card',[_c('v-card-title',{domProps:{\"textContent\":_vm._s(_vm.$t('nodes.Edit'))}}),_c('v-card-text',{staticClass:\"mt-6\"},[_c('v-row',[_c('v-col',[_c('v-text-field',{attrs:{\"label\":_vm.$t('common.Name'),\"outlined\":\"\",\"hide-details\":\"\"},model:{value:(_vm.node.name),callback:function ($$v) {_vm.$set(_vm.node, \"name\", $$v)},expression:\"node.name\"}})],1)],1),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":_vm.$t('nodes.PublicHost'),\"type\":\"text\",\"outlined\":\"\",\"hide-details\":\"\"},model:{value:(_vm.node.publicHost),callback:function ($$v) {_vm.$set(_vm.node, \"publicHost\", $$v)},expression:\"node.publicHost\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":_vm.$t('nodes.PublicPort'),\"type\":\"number\",\"outlined\":\"\",\"hide-details\":\"\"},model:{value:(_vm.node.publicPort),callback:function ($$v) {_vm.$set(_vm.node, \"publicPort\", $$v)},expression:\"node.publicPort\"}})],1)],1),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":_vm.$t('nodes.PrivateHost'),\"type\":\"text\",\"outlined\":\"\",\"hide-details\":\"\"},model:{value:(_vm.node.privateHost),callback:function ($$v) {_vm.$set(_vm.node, \"privateHost\", $$v)},expression:\"node.privateHost\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":_vm.$t('nodes.PrivatePort'),\"type\":\"number\",\"outlined\":\"\",\"hide-details\":\"\"},model:{value:(_vm.node.privatePort),callback:function ($$v) {_vm.$set(_vm.node, \"privatePort\", $$v)},expression:\"node.privatePort\"}})],1)],1),_c('v-row',[_c('v-col',[_c('v-text-field',{attrs:{\"label\":_vm.$t('nodes.SftpPort'),\"type\":\"number\",\"outlined\":\"\",\"hide-details\":\"\"},model:{value:(_vm.node.sftpPort),callback:function ($$v) {_vm.$set(_vm.node, \"sftpPort\", $$v)},expression:\"node.sftpPort\"}})],1)],1),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-btn',{attrs:{\"large\":\"\",\"block\":\"\",\"color\":\"success\"},domProps:{\"textContent\":_vm._s(_vm.$t('nodes.Update'))},on:{\"click\":_vm.updateNode}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-btn',{attrs:{\"block\":\"\",\"color\":\"error\"},domProps:{\"textContent\":_vm._s(_vm.$t('nodes.Delete'))},on:{\"click\":_vm.deleteNode}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-btn',{attrs:{\"disabled\":_vm.loadingDeploy,\"text\":\"\",\"block\":\"\"},domProps:{\"textContent\":_vm._s(_vm.$t('nodes.SaveConfig'))},on:{\"click\":function($event){return _vm.downloadConfig()}}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.markdown(_vm.$t('nodes.DeploymentInstruction')))}})])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n    <v-col\n      cols=\"12\"\n      md=\"6\"\n      offset-md=\"3\"\n    >\n      <v-card>\n        <v-card-title v-text=\"$t('nodes.Edit')\" />\n        <v-card-text class=\"mt-6\">\n          <v-row>\n            <v-col>\n              <v-text-field\n                v-model=\"node.name\"\n                :label=\"$t('common.Name')\"\n                outlined\n                hide-details\n              />\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col\n              cols=\"12\"\n              md=\"6\"\n            >\n              <v-text-field\n                v-model=\"node.publicHost\"\n                :label=\"$t('nodes.PublicHost')\"\n                type=\"text\"\n                outlined\n                hide-details\n              />\n            </v-col>\n            <v-col\n              cols=\"12\"\n              md=\"6\"\n            >\n              <v-text-field\n                v-model=\"node.publicPort\"\n                :label=\"$t('nodes.PublicPort')\"\n                type=\"number\"\n                outlined\n                hide-details\n              />\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col\n              cols=\"12\"\n              md=\"6\"\n            >\n              <v-text-field\n                v-model=\"node.privateHost\"\n                :label=\"$t('nodes.PrivateHost')\"\n                type=\"text\"\n                outlined\n                hide-details\n              />\n            </v-col>\n            <v-col\n              cols=\"12\"\n              md=\"6\"\n            >\n              <v-text-field\n                v-model=\"node.privatePort\"\n                :label=\"$t('nodes.PrivatePort')\"\n                type=\"number\"\n                outlined\n                hide-details\n              />\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col>\n              <v-text-field\n                v-model=\"node.sftpPort\"\n                :label=\"$t('nodes.SftpPort')\"\n                type=\"number\"\n                outlined\n                hide-details\n              />\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col cols=\"12\">\n              <v-btn\n                large\n                block\n                color=\"success\"\n                @click=\"updateNode\"\n                v-text=\"$t('nodes.Update')\"\n              />\n            </v-col>\n            <v-col cols=\"12\">\n              <v-btn\n                block\n                color=\"error\"\n                @click=\"deleteNode\"\n                v-text=\"$t('nodes.Delete')\"\n              />\n            </v-col>\n            <v-col cols=\"12\">\n              <v-btn\n                :disabled=\"loadingDeploy\"\n                text\n                block\n                @click=\"downloadConfig()\"\n                v-text=\"$t('nodes.SaveConfig')\"\n              />\n            </v-col>\n            <v-col cols=\"12\">\n              <!-- eslint-disable-next-line vue/no-v-html -->\n              <span v-html=\"markdown($t('nodes.DeploymentInstruction'))\" />\n            </v-col>\n          </v-row>\n        </v-card-text>\n      </v-card>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport { handleError } from '@/utils/api'\nimport { typeNode } from '@/utils/types'\nimport markdown from '@/utils/markdown'\n\nexport default {\n  data () {\n    return {\n      loading: true,\n      loadingDeploy: true,\n      node: {},\n      deployment: {\n        clientId: '',\n        clientSecret: ''\n      },\n      configTemplate: {\n        logs: '/var/log/pufferpanel',\n        web: {},\n        token: {\n          public: location.protocol + '//' + location.host + '/auth/publickey'\n        },\n        panel: {\n          enable: false\n        },\n        daemon: {\n          auth: {\n            url: location.protocol + '//' + location.host + '/oauth2/token'\n          },\n          data: {\n            cache: '/var/lib/pufferpanel/cache',\n            servers: '/var/lib/pufferpanel/servers'\n          },\n          sftp: {}\n        }\n      }\n    }\n  },\n  mounted () {\n    this.loadData()\n  },\n  methods: {\n    loadData () {\n      const ctx = this\n      ctx.$http.get(`/api/nodes/${ctx.$route.params.id}`).then(response => {\n        ctx.node = response.data\n        ctx.loading = false\n      }).catch(handleError(ctx))\n      ctx.$http.get(`/api/nodes/${ctx.$route.params.id}/deployment`).then(response => {\n        ctx.deployment = response.data\n        ctx.loadingDeploy = false\n      }).catch(handleError(ctx))\n    },\n    updateNode () {\n      const ctx = this\n      ctx.$http.put(`/api/nodes/${ctx.$route.params.id}`, typeNode(ctx.node)).then(response => {\n        ctx.$toast.success(ctx.$t('nodes.UpdateSuccess'))\n      }).catch(handleError(ctx))\n    },\n    deleteNode () {\n      const ctx = this\n      ctx.$http.delete(`/api/nodes/${ctx.$route.params.id}`).then(response => {\n        ctx.$router.push({ name: 'Nodes' })\n      }).catch(handleError(ctx))\n    },\n    downloadConfig () {\n      const config = { ...this.configTemplate }\n      config.daemon.auth.clientId = this.deployment.clientId\n      config.daemon.auth.clientSecret = this.deployment.clientSecret\n      config.daemon.sftp.host = `0.0.0.0:${this.node.sftpPort}`\n      config.web.host = `0.0.0.0:${this.node.privatePort}`\n      this.download(JSON.stringify(config, undefined, 2), 'config.json')\n    },\n    download (content, filename, contentType) {\n      if (!contentType) contentType = 'application/octet-stream'\n      var a = document.createElement('a')\n      var blob = new Blob([content], { type: contentType })\n      a.href = window.URL.createObjectURL(blob)\n      a.download = filename\n      a.click()\n    },\n    markdown\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Node.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Node.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Node.vue?vue&type=template&id=685eb7d8&\"\nimport script from \"./Node.vue?vue&type=script&lang=js&\"\nexport * from \"./Node.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardText,VCardTitle,VCol,VRow,VTextField})\n"],"sourceRoot":""}