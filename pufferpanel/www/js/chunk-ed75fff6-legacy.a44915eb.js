(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ed75fff6"],{"0c18":function(t,e,s){},"2bfd":function(t,e,s){},"98ca":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("div",{staticClass:"d-flex"},[s("h1",{staticClass:"flex-grow-1",domProps:{textContent:t._s(t.$t("templates.Templates"))}}),s("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[s("v-btn",t._g({attrs:{icon:""},on:{click:t.loadTemplateImporter}},n),[s("v-icon",[t._v("mdi-import")])],1)]}}])},[s("span",{domProps:{textContent:t._s(t.$t("templates.import.Tooltip"))}})])],1),s("v-row",[s("v-col",[s("v-list",{staticClass:"pt-2",attrs:{subheader:"",elevation:"1"}},[t._l(t.templates,(function(e,n,i){return s("div",{key:n},[1!==Object.keys(t.templates).length?s("v-subheader",{class:t.isDark()?t.headerClasses.dark:t.headerClasses.light,domProps:{textContent:t._s(n)}}):t._e(),t._l(t.templates[n],(function(e){return s("div",{key:e.name},[s("v-list-item",{attrs:{to:t.hasScope("templates.edit")||t.isAdmin()?{name:"Template",params:{id:e.name}}:void 0}},[s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s(e.display)}})],1)],1)],1)})),i!==Object.keys(t.templates).length-1?s("v-divider"):t._e()],2)})),0===Object.keys(t.templates).length?s("div",{staticClass:"pt-2 text-center text--disabled"},[t.loading?s("span",{domProps:{textContent:t._s(t.$t("common.Loading"))}}):s("span",{domProps:{textContent:t._s(t.$t("templates.NoTemplates"))}})]):t._e()],2),s("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.hasScope("templates.edit")||t.isAdmin(),expression:"hasScope('templates.edit') || isAdmin()"}],attrs:{color:"primary",bottom:"",right:"",fixed:"",fab:"",dark:"",large:"",to:{name:"AddTemplate"}}},[s("v-icon",[t._v("mdi-plus")])],1)],1)],1),s("common-overlay",{attrs:{card:"",closable:"",title:t.$t("templates.import.Import")},model:{value:t.showTemplateImporter,callback:function(e){t.showTemplateImporter=e},expression:"showTemplateImporter"}},[s("v-alert",{attrs:{border:"bottom",text:"",type:"warning",dense:""}},[t._v(" "+t._s(t.$t("templates.import.OverrideWarning"))+" ")]),s("v-autocomplete",{attrs:{items:t.importableTemplates,chips:"",label:t.$t("templates.import.Select"),multiple:"",clearable:"","deletable-chips":"",solo:"","open-on-clear":""},model:{value:t.templatesToImport,callback:function(e){t.templatesToImport=e},expression:"templatesToImport"}}),s("v-row",[s("v-col",[s("v-btn",{attrs:{block:"",color:"error"},domProps:{textContent:t._s(t.$t("common.Cancel"))},on:{click:function(e){t.showTemplateImporter=!1}}})],1),s("v-col",[s("v-btn",{attrs:{block:"",color:"success"},domProps:{textContent:t._s(t.$t("templates.import.Import"))},on:{click:function(e){return t.doImports()}}})],1)],1)],1),s("common-overlay",{attrs:{card:"",closable:"",title:t.$t("templates.import.NoTemplatesTitle")},model:{value:t.offerImport,callback:function(e){t.offerImport=e},expression:"offerImport"}},[s("v-row",[s("v-col",[s("span",{domProps:{innerHTML:t._s(t.$t("templates.import.NoTemplatesContent"))}})])],1),s("v-row",[s("v-col",[s("v-btn",{attrs:{block:"",color:"error"},domProps:{textContent:t._s(t.$t("common.Cancel"))},on:{click:function(e){return t.importDeclined()}}})],1),s("v-col",[s("v-btn",{attrs:{block:"",color:"success"},domProps:{textContent:t._s(t.$t("templates.import.Import"))},on:{click:function(e){t.offerImport=!1,t.loadTemplateImporter()}}})],1)],1)],1)],1)},i=[],o=(s("c975"),s("d81d"),s("13d5"),s("b0c0"),s("b64b"),s("d3b7"),s("5530")),a=s("96ea"),r=s("7c15"),l={data:function(){return{loading:!0,templates:{},headerClasses:{light:"body-1 grey font-weight-bold lighten-4 black--text",dark:"body-1 grey font-weight-bold darken-4 white--text"},offerImport:!1,showTemplateImporter:!1,importableTemplates:[],templatesToImport:[],unproxiedTheme:this.$vuetify.theme}},mounted:function(){var t=this;this.loadData();var e=new Proxy(this.$vuetify.theme,{set:function(e,s,n){return t.$forceUpdate(),e[s]=n,!0}});this.$vuetify.theme=e},beforeDestroy:function(){this.$vuetify.theme=this.unproxiedTheme},methods:{loadData:function(){var t=this,e=this;e.loading=!0,e.templates={},e.$http.get("/api/templates").then((function(s){s.data.map((function(t){t.display||(t.display=t.name),t.type||(t.type="none"),e.templates[t.type]||(e.templates[t.type]=[]),e.templates[t.type].push(t)}));var n=Object.keys(e.templates),i=n.indexOf("other");-1!==i&&t.$delete(n,i),n.map((function(t){1===e.templates[t].length&&(e.templates.other||(e.templates.other=[]),e.templates.other.push(e.templates[t][0]),delete e.templates[t])})),e.templates=Object(o["a"])({},e.templates),e.loading=!1,0===s.data.length&&"false"!==localStorage.getItem("offerTemplateImport")&&(e.offerImport=!0)})).catch(Object(r["a"])(e))},loadTemplateImporter:function(){var t=this;t.importableTemplates=[],t.templatesToImport=[],t.$http.post("/api/templates/import").then((function(e){t.importableTemplates=e.data,t.showTemplateImporter=!0})).catch(Object(r["a"])(t))},doImports:function(){var t=this;t.loading=!0,t.showTemplateImporter=!1,t.$toast.info(this.$t("templates.import.Started")),t.templatesToImport.reduce((function(e,s){return e.finally((function(){return t.importTemplate(t,s)}))}),Promise.resolve()).finally((function(){t.loadData()}))},importTemplate:function(t,e){return t.$http.post("/api/templates/import/".concat(e)).then((function(s){t.$toast.success(t.$t("templates.import.Successful",{template:e}))})).catch(Object(r["a"])(t))},importDeclined:function(){this.offerImport=!1,localStorage.setItem("offerTemplateImport","false")},isDark:a["a"]}},c=l,h=s("2877"),d=s("6544"),u=s.n(d),p=(s("caad"),s("ade3")),m=(s("0c18"),s("10d2")),f=s("afdd"),v=s("9d26"),I=s("f2e7"),b=s("7560"),g=s("2b0e"),y=g["a"].extend({name:"transitionable",props:{mode:String,origin:String,transition:String}}),x=s("58df"),S=s("d9bd"),C=Object(x["a"])(m["a"],I["a"],y).extend({name:"v-alert",props:{border:{type:String,validator:function(t){return["top","right","bottom","left"].includes(t)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator:function(t){return"string"===typeof t||!1===t}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:function(t){return["info","error","success","warning"].includes(t)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder:function(){if(!this.border)return null;var t={staticClass:"v-alert__border",class:Object(p["a"])({},"v-alert__border--".concat(this.border),!0)};return this.coloredBorder&&(t=this.setBackgroundColor(this.computedColor,t),t.class["v-alert__border--has-color"]=!0),this.$createElement("div",t)},__cachedDismissible:function(){var t=this;if(!this.dismissible)return null;var e=this.iconColor;return this.$createElement(f["a"],{staticClass:"v-alert__dismissible",props:{color:e,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(){return t.isActive=!1}}},[this.$createElement(v["a"],{props:{color:e}},this.closeIcon)])},__cachedIcon:function(){return this.computedIcon?this.$createElement(v["a"],{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes:function(){var t=Object(o["a"])(Object(o["a"])({},m["a"].options.computed.classes.call(this)),{},{"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text});return this.border&&(t["v-alert--border-".concat(this.border)]=!0),t},computedColor:function(){return this.color||this.type},computedIcon:function(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$".concat(this.type))},hasColoredIcon:function(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText:function(){return this.text||this.outlined},iconColor:function(){return this.hasColoredIcon?this.computedColor:void 0},isDark:function(){return!(!this.type||this.coloredBorder||this.outlined)||b["a"].options.computed.isDark.call(this)}},created:function(){this.$attrs.hasOwnProperty("outline")&&Object(S["a"])("outline","outlined",this)},methods:{genWrapper:function(){var t=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],e={staticClass:"v-alert__wrapper"};return this.$createElement("div",e,t)},genContent:function(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert:function(){var t={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){var e=this.hasText?this.setTextColor:this.setBackgroundColor;t=e(this.computedColor,t)}return this.$createElement("div",t,[this.genWrapper()])},toggle:function(){this.isActive=!this.isActive}},render:function(t){var e=this.genAlert();return this.transition?t("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[e]):e}}),$=(s("4de4"),s("7db0"),s("45fc"),s("498a"),s("2bfd"),s("b974")),_=s("8654"),T=s("d9f7"),w=s("80d2"),D=Object(o["a"])(Object(o["a"])({},$["b"]),{},{offsetY:!0,offsetOverflow:!0,transition:!1}),k=$["a"].extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:function(t,e,s){return s.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1}},hideNoData:Boolean,menuProps:{type:$["a"].options.props.menuProps.type,default:function(){return D}},noFilter:Boolean,searchInput:{type:String,default:void 0}},data:function(){return{lazySearch:this.searchInput}},computed:{classes:function(){return Object(o["a"])(Object(o["a"])({},$["a"].options.computed.classes.call(this)),{},{"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1})},computedItems:function(){return this.filteredItems},selectedValues:function(){var t=this;return this.selectedItems.map((function(e){return t.getValue(e)}))},hasDisplayedItems:function(){var t=this;return this.hideSelected?this.filteredItems.some((function(e){return!t.hasItem(e)})):this.filteredItems.length>0},currentRange:function(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems:function(){var t=this;return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter((function(e){var s=Object(w["q"])(e,t.itemText),n=null!=s?String(s):"";return t.filter(e,String(t.internalSearch),n)}))},internalSearch:{get:function(){return this.lazySearch},set:function(t){this.lazySearch=t,this.$emit("update:search-input",t)}},isAnyValueAllowed:function(){return!1},isDirty:function(){return this.searchIsDirty||this.selectedItems.length>0},isSearching:function(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow:function(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps:function(){var t=$["a"].options.computed.$_menuProps.call(this);return t.contentClass="v-autocomplete__content ".concat(t.contentClass||"").trim(),Object(o["a"])(Object(o["a"])({},D),t)},searchIsDirty:function(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem:function(){var t=this;return this.multiple?null:this.selectedItems.find((function(e){return t.valueComparator(t.getValue(e),t.getValue(t.internalValue))}))},listData:function(){var t=$["a"].options.computed.listData.call(this);return t.props=Object(o["a"])(Object(o["a"])({},t.props),{},{items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch}),t}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused:function(t){t?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.updateSelf())},isMenuActive:function(t){!t&&this.hasSlot&&(this.lazySearch=void 0)},items:function(t,e){e&&e.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!t.length||this.activateMenu()},searchInput:function(t){this.lazySearch=t},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created:function(){this.setSearch()},destroyed:function(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged:function(t,e){var s=this;t!==e&&(this.setMenuIndex(-1),this.$nextTick((function(){s.internalSearch&&(1===t.length||s.autoSelectFirst)&&(s.$refs.menu.getTiles(),s.setMenuIndex(0))})))},onInternalSearchChanged:function(){this.updateMenuDimensions()},updateMenuDimensions:function(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex:function(t){this.searchIsDirty||(this.multiple&&t===w["x"].left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&t===w["x"].right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:t!==w["x"].backspace&&t!==w["x"].delete||this.deleteCurrentItem())},deleteCurrentItem:function(){var t=this.selectedIndex,e=this.selectedItems[t];if(this.isInteractive&&!this.getDisabled(e)){var s=this.selectedItems.length-1;if(-1!==this.selectedIndex||0===s){var n=this.selectedItems.length,i=t!==n-1?t:t-1,o=this.selectedItems[i];o?this.selectItem(e):this.setValue(this.multiple?[]:void 0),this.selectedIndex=i}else this.selectedIndex=s}},clearableCallback:function(){this.internalSearch=void 0,$["a"].options.methods.clearableCallback.call(this)},genInput:function(){var t=_["a"].options.methods.genInput.call(this);return t.data=Object(T["a"])(t.data,{attrs:{"aria-activedescendant":Object(w["o"])(this.$refs.menu,"activeTile.id"),autocomplete:Object(w["o"])(t.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),t},genInputSlot:function(){var t=$["a"].options.methods.genInputSlot.call(this);return t.data.attrs.role="combobox",t},genSelections:function(){return this.hasSlot||this.multiple?$["a"].options.methods.genSelections.call(this):[]},onClick:function(t){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(t.target)||this.activateMenu())},onInput:function(t){if(!(this.selectedIndex>-1)&&t.target){var e=t.target,s=e.value;e.value&&this.activateMenu(),this.internalSearch=s,this.badInput=e.validity&&e.validity.badInput}},onKeyDown:function(t){var e=t.keyCode;$["a"].options.methods.onKeyDown.call(this,t),this.changeSelectedIndex(e)},onSpaceDown:function(t){},onTabDown:function(t){$["a"].options.methods.onTabDown.call(this,t),this.updateSelf()},onUpDown:function(t){t.preventDefault(),this.activateMenu()},selectItem:function(t){$["a"].options.methods.selectItem.call(this,t),this.setSearch()},setSelectedItems:function(){$["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch:function(){var t=this;this.$nextTick((function(){t.multiple&&t.internalSearch&&t.isMenuActive||(t.internalSearch=!t.selectedItems.length||t.multiple||t.hasSlot?null:t.getText(t.selectedItem))}))},updateSelf:function(){(this.searchIsDirty||this.internalValue)&&(this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem:function(t){return this.selectedValues.indexOf(this.getValue(t))>-1},onCopy:function(t){if(-1!==this.selectedIndex){var e=this.selectedItems[this.selectedIndex],s=this.getText(e);t.clipboardData.setData("text/plain",s),t.clipboardData.setData("text/vnd.vuetify.autocomplete.item+plain",s),t.preventDefault()}}}}),O=s("8336"),V=s("62ad"),j=s("a523"),B=s("ce7e"),A=s("132d"),P=s("8860"),L=s("da13"),F=s("5d23"),M=s("0fd9"),E=s("e0c7"),N=s("3a2f"),z=Object(h["a"])(c,n,i,!1,null,null,null);e["default"]=z.exports;u()(z,{VAlert:C,VAutocomplete:k,VBtn:O["a"],VCol:V["a"],VContainer:j["a"],VDivider:B["a"],VIcon:A["a"],VList:P["a"],VListItem:L["a"],VListItemContent:F["a"],VListItemTitle:F["c"],VRow:M["a"],VSubheader:E["a"],VTooltip:N["a"]})},afdd:function(t,e,s){"use strict";var n=s("8336");e["a"]=n["a"]}}]);
//# sourceMappingURL=chunk-ed75fff6-legacy.a44915eb.js.map