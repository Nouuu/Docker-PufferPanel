(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e25d783"],{"6bfe":function(t,e,o){"use strict";function a(t){return{name:t.name,publicHost:t.publicHost,publicPort:Number(t.publicPort),privateHost:t.privateHost,privatePort:Number(t.privatePort),sftpPort:Number(t.sftpPort)}}o.d(e,"a",(function(){return a}))},"8b83":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-row",[o("v-col",{attrs:{cols:"12",md:"6","offset-md":"3"}},[o("v-card",[o("v-card-title",{domProps:{textContent:t._s(t.$t("nodes.Edit"))}}),o("v-card-text",{staticClass:"mt-6"},[o("v-row",[o("v-col",[o("v-text-field",{attrs:{label:t.$t("common.Name"),outlined:"","hide-details":""},model:{value:t.node.name,callback:function(e){t.$set(t.node,"name",e)},expression:"node.name"}})],1)],1),o("v-row",[o("v-col",{attrs:{cols:"12",md:"6"}},[o("v-text-field",{attrs:{label:t.$t("nodes.PublicHost"),type:"text",outlined:"","hide-details":""},model:{value:t.node.publicHost,callback:function(e){t.$set(t.node,"publicHost",e)},expression:"node.publicHost"}})],1),o("v-col",{attrs:{cols:"12",md:"6"}},[o("v-text-field",{attrs:{label:t.$t("nodes.PublicPort"),type:"number",outlined:"","hide-details":""},model:{value:t.node.publicPort,callback:function(e){t.$set(t.node,"publicPort",e)},expression:"node.publicPort"}})],1)],1),o("v-row",[o("v-col",{attrs:{cols:"12",md:"6"}},[o("v-text-field",{attrs:{label:t.$t("nodes.PrivateHost"),type:"text",outlined:"","hide-details":""},model:{value:t.node.privateHost,callback:function(e){t.$set(t.node,"privateHost",e)},expression:"node.privateHost"}})],1),o("v-col",{attrs:{cols:"12",md:"6"}},[o("v-text-field",{attrs:{label:t.$t("nodes.PrivatePort"),type:"number",outlined:"","hide-details":""},model:{value:t.node.privatePort,callback:function(e){t.$set(t.node,"privatePort",e)},expression:"node.privatePort"}})],1)],1),o("v-row",[o("v-col",[o("v-text-field",{attrs:{label:t.$t("nodes.SftpPort"),type:"number",outlined:"","hide-details":""},model:{value:t.node.sftpPort,callback:function(e){t.$set(t.node,"sftpPort",e)},expression:"node.sftpPort"}})],1)],1),o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("v-btn",{attrs:{large:"",block:"",color:"success"},domProps:{textContent:t._s(t.$t("nodes.Update"))},on:{click:t.updateNode}})],1),o("v-col",{attrs:{cols:"12"}},[o("v-btn",{attrs:{block:"",color:"error"},domProps:{textContent:t._s(t.$t("nodes.Delete"))},on:{click:t.deleteNode}})],1),o("v-col",{attrs:{cols:"12"}},[o("v-btn",{attrs:{disabled:t.loadingDeploy,text:"",block:""},domProps:{textContent:t._s(t.$t("nodes.SaveConfig"))},on:{click:function(e){return t.downloadConfig()}}})],1),o("v-col",{attrs:{cols:"12"}},[o("span",{domProps:{innerHTML:t._s(t.markdown(t.$t("nodes.DeploymentInstruction")))}})])],1)],1)],1)],1)],1)},n=[],l=(o("ddb0"),o("2b3d"),o("5530")),d=o("7c15"),s=o("6bfe"),c=o("8e365"),r={data(){return{loading:!0,loadingDeploy:!0,node:{},deployment:{clientId:"",clientSecret:""},configTemplate:{logs:"/var/log/pufferpanel",web:{},token:{public:location.protocol+"//"+location.host+"/auth/publickey"},panel:{enable:!1},daemon:{auth:{url:location.protocol+"//"+location.host+"/oauth2/token"},data:{cache:"/var/lib/pufferpanel/cache",servers:"/var/lib/pufferpanel/servers"},sftp:{}}}}},mounted(){this.loadData()},methods:{loadData(){const t=this;t.$http.get("/api/nodes/"+t.$route.params.id).then(e=>{t.node=e.data,t.loading=!1}).catch(Object(d["a"])(t)),t.$http.get(`/api/nodes/${t.$route.params.id}/deployment`).then(e=>{t.deployment=e.data,t.loadingDeploy=!1}).catch(Object(d["a"])(t))},updateNode(){const t=this;t.$http.put("/api/nodes/"+t.$route.params.id,Object(s["a"])(t.node)).then(e=>{t.$toast.success(t.$t("nodes.UpdateSuccess"))}).catch(Object(d["a"])(t))},deleteNode(){const t=this;t.$http.delete("/api/nodes/"+t.$route.params.id).then(e=>{t.$router.push({name:"Nodes"})}).catch(Object(d["a"])(t))},downloadConfig(){const t=Object(l["a"])({},this.configTemplate);t.daemon.auth.clientId=this.deployment.clientId,t.daemon.auth.clientSecret=this.deployment.clientSecret,t.daemon.sftp.host="0.0.0.0:"+this.node.sftpPort,t.web.host="0.0.0.0:"+this.node.privatePort,this.download(JSON.stringify(t,void 0,2),"config.json")},download(t,e,o){o||(o="application/octet-stream");var a=document.createElement("a"),n=new Blob([t],{type:o});a.href=window.URL.createObjectURL(n),a.download=e,a.click()},markdown:c["a"]}},i=r,p=o("2877"),u=o("6544"),b=o.n(u),v=o("8336"),m=o("b0af"),f=o("99d9"),h=o("62ad"),$=o("0fd9"),P=o("8654"),w=Object(p["a"])(i,a,n,!1,null,null,null);e["default"]=w.exports;b()(w,{VBtn:v["a"],VCard:m["a"],VCardText:f["c"],VCardTitle:f["d"],VCol:h["a"],VRow:$["a"],VTextField:P["a"]})}}]);
//# sourceMappingURL=chunk-6e25d783.29aad4ff.js.map