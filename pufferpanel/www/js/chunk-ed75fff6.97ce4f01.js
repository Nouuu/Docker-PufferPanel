(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ed75fff6"],{"0c18":function(t,e,s){},"2bfd":function(t,e,s){},"98ca":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("div",{staticClass:"d-flex"},[s("h1",{staticClass:"flex-grow-1",domProps:{textContent:t._s(t.$t("templates.Templates"))}}),s("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[s("v-btn",t._g({attrs:{icon:""},on:{click:t.loadTemplateImporter}},i),[s("v-icon",[t._v("mdi-import")])],1)]}}])},[s("span",{domProps:{textContent:t._s(t.$t("templates.import.Tooltip"))}})])],1),s("v-row",[s("v-col",[s("v-list",{staticClass:"pt-2",attrs:{subheader:"",elevation:"1"}},[t._l(t.templates,(function(e,i,o){return s("div",{key:i},[1!==Object.keys(t.templates).length?s("v-subheader",{class:t.isDark()?t.headerClasses.dark:t.headerClasses.light,domProps:{textContent:t._s(i)}}):t._e(),t._l(t.templates[i],(function(e){return s("div",{key:e.name},[s("v-list-item",{attrs:{to:t.hasScope("templates.edit")||t.isAdmin()?{name:"Template",params:{id:e.name}}:void 0}},[s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s(e.display)}})],1)],1)],1)})),o!==Object.keys(t.templates).length-1?s("v-divider"):t._e()],2)})),0===Object.keys(t.templates).length?s("div",{staticClass:"pt-2 text-center text--disabled"},[t.loading?s("span",{domProps:{textContent:t._s(t.$t("common.Loading"))}}):s("span",{domProps:{textContent:t._s(t.$t("templates.NoTemplates"))}})]):t._e()],2),s("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.hasScope("templates.edit")||t.isAdmin(),expression:"hasScope('templates.edit') || isAdmin()"}],attrs:{color:"primary",bottom:"",right:"",fixed:"",fab:"",dark:"",large:"",to:{name:"AddTemplate"}}},[s("v-icon",[t._v("mdi-plus")])],1)],1)],1),s("common-overlay",{attrs:{card:"",closable:"",title:t.$t("templates.import.Import")},model:{value:t.showTemplateImporter,callback:function(e){t.showTemplateImporter=e},expression:"showTemplateImporter"}},[s("v-alert",{attrs:{border:"bottom",text:"",type:"warning",dense:""}},[t._v(" "+t._s(t.$t("templates.import.OverrideWarning"))+" ")]),s("v-autocomplete",{attrs:{items:t.importableTemplates,chips:"",label:t.$t("templates.import.Select"),multiple:"",clearable:"","deletable-chips":"",solo:"","open-on-clear":""},model:{value:t.templatesToImport,callback:function(e){t.templatesToImport=e},expression:"templatesToImport"}}),s("v-row",[s("v-col",[s("v-btn",{attrs:{block:"",color:"error"},domProps:{textContent:t._s(t.$t("common.Cancel"))},on:{click:function(e){t.showTemplateImporter=!1}}})],1),s("v-col",[s("v-btn",{attrs:{block:"",color:"success"},domProps:{textContent:t._s(t.$t("templates.import.Import"))},on:{click:function(e){return t.doImports()}}})],1)],1)],1),s("common-overlay",{attrs:{card:"",closable:"",title:t.$t("templates.import.NoTemplatesTitle")},model:{value:t.offerImport,callback:function(e){t.offerImport=e},expression:"offerImport"}},[s("v-row",[s("v-col",[s("span",{domProps:{innerHTML:t._s(t.$t("templates.import.NoTemplatesContent"))}})])],1),s("v-row",[s("v-col",[s("v-btn",{attrs:{block:"",color:"error"},domProps:{textContent:t._s(t.$t("common.Cancel"))},on:{click:function(e){return t.importDeclined()}}})],1),s("v-col",[s("v-btn",{attrs:{block:"",color:"success"},domProps:{textContent:t._s(t.$t("templates.import.Import"))},on:{click:function(e){t.offerImport=!1,t.loadTemplateImporter()}}})],1)],1)],1)],1)},o=[],a=s("5530"),l=s("96ea"),r=s("7c15"),n={data(){return{loading:!0,templates:{},headerClasses:{light:"body-1 grey font-weight-bold lighten-4 black--text",dark:"body-1 grey font-weight-bold darken-4 white--text"},offerImport:!1,showTemplateImporter:!1,importableTemplates:[],templatesToImport:[],unproxiedTheme:this.$vuetify.theme}},mounted(){this.loadData();const t=new Proxy(this.$vuetify.theme,{set:(t,e,s)=>(this.$forceUpdate(),t[e]=s,!0)});this.$vuetify.theme=t},beforeDestroy(){this.$vuetify.theme=this.unproxiedTheme},methods:{loadData(){const t=this;t.loading=!0,t.templates={},t.$http.get("/api/templates").then(e=>{e.data.map(e=>{e.display||(e.display=e.name),e.type||(e.type="none"),t.templates[e.type]||(t.templates[e.type]=[]),t.templates[e.type].push(e)});const s=Object.keys(t.templates),i=s.indexOf("other");-1!==i&&this.$delete(s,i),s.map(e=>{1===t.templates[e].length&&(t.templates.other||(t.templates.other=[]),t.templates.other.push(t.templates[e][0]),delete t.templates[e])}),t.templates=Object(a["a"])({},t.templates),t.loading=!1,0===e.data.length&&"false"!==localStorage.getItem("offerTemplateImport")&&(t.offerImport=!0)}).catch(Object(r["a"])(t))},loadTemplateImporter(){const t=this;t.importableTemplates=[],t.templatesToImport=[],t.$http.post("/api/templates/import").then(e=>{t.importableTemplates=e.data,t.showTemplateImporter=!0}).catch(Object(r["a"])(t))},doImports(){const t=this;t.loading=!0,t.showTemplateImporter=!1,t.$toast.info(this.$t("templates.import.Started")),t.templatesToImport.reduce((e,s)=>e.finally(()=>t.importTemplate(t,s)),Promise.resolve()).finally(()=>{t.loadData()})},importTemplate(t,e){return t.$http.post("/api/templates/import/"+e).then(s=>{t.$toast.success(t.$t("templates.import.Successful",{template:e}))}).catch(Object(r["a"])(t))},importDeclined(){this.offerImport=!1,localStorage.setItem("offerTemplateImport","false")},isDark:l["a"]}},c=n,h=s("2877"),d=s("6544"),p=s.n(d),m=(s("0c18"),s("10d2")),u=s("afdd"),v=s("9d26"),f=s("f2e7"),I=s("7560"),g=s("2b0e"),b=g["a"].extend({name:"transitionable",props:{mode:String,origin:String,transition:String}}),y=s("58df"),x=s("d9bd"),S=Object(y["a"])(m["a"],f["a"],b).extend({name:"v-alert",props:{border:{type:String,validator(t){return["top","right","bottom","left"].includes(t)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator(t){return"string"===typeof t||!1===t}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator(t){return["info","error","success","warning"].includes(t)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder(){if(!this.border)return null;let t={staticClass:"v-alert__border",class:{["v-alert__border--"+this.border]:!0}};return this.coloredBorder&&(t=this.setBackgroundColor(this.computedColor,t),t.class["v-alert__border--has-color"]=!0),this.$createElement("div",t)},__cachedDismissible(){if(!this.dismissible)return null;const t=this.iconColor;return this.$createElement(u["a"],{staticClass:"v-alert__dismissible",props:{color:t,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:()=>this.isActive=!1}},[this.$createElement(v["a"],{props:{color:t}},this.closeIcon)])},__cachedIcon(){return this.computedIcon?this.$createElement(v["a"],{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes(){const t=Object(a["a"])(Object(a["a"])({},m["a"].options.computed.classes.call(this)),{},{"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text});return this.border&&(t["v-alert--border-"+this.border]=!0),t},computedColor(){return this.color||this.type},computedIcon(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$"+this.type)},hasColoredIcon(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText(){return this.text||this.outlined},iconColor(){return this.hasColoredIcon?this.computedColor:void 0},isDark(){return!(!this.type||this.coloredBorder||this.outlined)||I["a"].options.computed.isDark.call(this)}},created(){this.$attrs.hasOwnProperty("outline")&&Object(x["a"])("outline","outlined",this)},methods:{genWrapper(){const t=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],e={staticClass:"v-alert__wrapper"};return this.$createElement("div",e,t)},genContent(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert(){let t={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){const e=this.hasText?this.setTextColor:this.setBackgroundColor;t=e(this.computedColor,t)}return this.$createElement("div",t,[this.genWrapper()])},toggle(){this.isActive=!this.isActive}},render(t){const e=this.genAlert();return this.transition?t("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[e]):e}}),C=(s("2bfd"),s("b974")),$=s("8654"),_=s("d9f7"),T=s("80d2");const w=Object(a["a"])(Object(a["a"])({},C["b"]),{},{offsetY:!0,offsetOverflow:!0,transition:!1});var D=C["a"].extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:(t,e,s)=>s.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1},hideNoData:Boolean,menuProps:{type:C["a"].options.props.menuProps.type,default:()=>w},noFilter:Boolean,searchInput:{type:String,default:void 0}},data(){return{lazySearch:this.searchInput}},computed:{classes(){return Object(a["a"])(Object(a["a"])({},C["a"].options.computed.classes.call(this)),{},{"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1})},computedItems(){return this.filteredItems},selectedValues(){return this.selectedItems.map(t=>this.getValue(t))},hasDisplayedItems(){return this.hideSelected?this.filteredItems.some(t=>!this.hasItem(t)):this.filteredItems.length>0},currentRange(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems(){return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter(t=>{const e=Object(T["q"])(t,this.itemText),s=null!=e?String(e):"";return this.filter(t,String(this.internalSearch),s)})},internalSearch:{get(){return this.lazySearch},set(t){this.lazySearch=t,this.$emit("update:search-input",t)}},isAnyValueAllowed(){return!1},isDirty(){return this.searchIsDirty||this.selectedItems.length>0},isSearching(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps(){const t=C["a"].options.computed.$_menuProps.call(this);return t.contentClass=("v-autocomplete__content "+(t.contentClass||"")).trim(),Object(a["a"])(Object(a["a"])({},w),t)},searchIsDirty(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem(){return this.multiple?null:this.selectedItems.find(t=>this.valueComparator(this.getValue(t),this.getValue(this.internalValue)))},listData(){const t=C["a"].options.computed.listData.call(this);return t.props=Object(a["a"])(Object(a["a"])({},t.props),{},{items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch}),t}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused(t){t?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.updateSelf())},isMenuActive(t){!t&&this.hasSlot&&(this.lazySearch=void 0)},items(t,e){e&&e.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!t.length||this.activateMenu()},searchInput(t){this.lazySearch=t},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created(){this.setSearch()},destroyed(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged(t,e){t!==e&&(this.setMenuIndex(-1),this.$nextTick(()=>{this.internalSearch&&(1===t.length||this.autoSelectFirst)&&(this.$refs.menu.getTiles(),this.setMenuIndex(0))}))},onInternalSearchChanged(){this.updateMenuDimensions()},updateMenuDimensions(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex(t){this.searchIsDirty||(this.multiple&&t===T["x"].left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&t===T["x"].right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:t!==T["x"].backspace&&t!==T["x"].delete||this.deleteCurrentItem())},deleteCurrentItem(){const t=this.selectedIndex,e=this.selectedItems[t];if(!this.isInteractive||this.getDisabled(e))return;const s=this.selectedItems.length-1;if(-1===this.selectedIndex&&0!==s)return void(this.selectedIndex=s);const i=this.selectedItems.length,o=t!==i-1?t:t-1,a=this.selectedItems[o];a?this.selectItem(e):this.setValue(this.multiple?[]:void 0),this.selectedIndex=o},clearableCallback(){this.internalSearch=void 0,C["a"].options.methods.clearableCallback.call(this)},genInput(){const t=$["a"].options.methods.genInput.call(this);return t.data=Object(_["a"])(t.data,{attrs:{"aria-activedescendant":Object(T["o"])(this.$refs.menu,"activeTile.id"),autocomplete:Object(T["o"])(t.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),t},genInputSlot(){const t=C["a"].options.methods.genInputSlot.call(this);return t.data.attrs.role="combobox",t},genSelections(){return this.hasSlot||this.multiple?C["a"].options.methods.genSelections.call(this):[]},onClick(t){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(t.target)||this.activateMenu())},onInput(t){if(this.selectedIndex>-1||!t.target)return;const e=t.target,s=e.value;e.value&&this.activateMenu(),this.internalSearch=s,this.badInput=e.validity&&e.validity.badInput},onKeyDown(t){const e=t.keyCode;C["a"].options.methods.onKeyDown.call(this,t),this.changeSelectedIndex(e)},onSpaceDown(t){},onTabDown(t){C["a"].options.methods.onTabDown.call(this,t),this.updateSelf()},onUpDown(t){t.preventDefault(),this.activateMenu()},selectItem(t){C["a"].options.methods.selectItem.call(this,t),this.setSearch()},setSelectedItems(){C["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch(){this.$nextTick(()=>{this.multiple&&this.internalSearch&&this.isMenuActive||(this.internalSearch=!this.selectedItems.length||this.multiple||this.hasSlot?null:this.getText(this.selectedItem))})},updateSelf(){(this.searchIsDirty||this.internalValue)&&(this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem(t){return this.selectedValues.indexOf(this.getValue(t))>-1},onCopy(t){if(-1===this.selectedIndex)return;const e=this.selectedItems[this.selectedIndex],s=this.getText(e);t.clipboardData.setData("text/plain",s),t.clipboardData.setData("text/vnd.vuetify.autocomplete.item+plain",s),t.preventDefault()}}}),k=s("8336"),O=s("62ad"),V=s("a523"),j=s("ce7e"),B=s("132d"),A=s("8860"),P=s("da13"),L=s("5d23"),F=s("0fd9"),M=s("e0c7"),E=s("3a2f"),N=Object(h["a"])(c,i,o,!1,null,null,null);e["default"]=N.exports;p()(N,{VAlert:S,VAutocomplete:D,VBtn:k["a"],VCol:O["a"],VContainer:V["a"],VDivider:j["a"],VIcon:B["a"],VList:A["a"],VListItem:P["a"],VListItemContent:L["a"],VListItemTitle:L["c"],VRow:F["a"],VSubheader:M["a"],VTooltip:E["a"]})},afdd:function(t,e,s){"use strict";var i=s("8336");e["a"]=i["a"]}}]);
//# sourceMappingURL=chunk-ed75fff6.97ce4f01.js.map